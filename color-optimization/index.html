<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Color Palette Extender</title>
  <link rel="stylesheet" href="style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <main class="page">
    <header class="hero">
      <div class="hero-text">
        <style>
        </style>
    
        <p class="eyebrow-title">
          <span class="c-1">P</span><span class="c-2">a</span><span class="c-3">l</span><span class="c-4">e</span><span
            class="c-5">t</span><span class="c-6">t</span><span class="c-7">e</span>
          <span class="c-8">T</span><span class="c-9">o</span><span class="c-10">w</span><span class="c-11">n</span>
        </p>
    
        <h1 class="long-title">
          traversing <span class="c-1">P</span>erceptu<span class="c-2">A</span>lly uniform co<span
            class="c-3">L</span>orspaces to
          <span class="c-4">E</span>nhance and ex<span class="c-5">T</span>end discre<span class="c-6">T</span>e color
          palett<span class="c-7">E</span>s for
          <span class="c-8">T</span>richromatic and c<span class="c-9">O</span>lor vision deficient discriminability
          <span class="c-10">W</span>ith joi<span class="c-11">N</span>t optimization
        </h1>
    
        <p class="subhead">
          Choose your starter palette, train their parameters, and watch your team evolve into a champion color scheme.
        </p>
      </div>
    
      <div class="actions">
        <button id="run-btn" class="primary">RUN</button>
        <button id="reset-btn" class="ghost">RESET</button>
      </div>
    </header>

    <section class="layout">
      <div class="controls stack">
        <div class="control-block wide">
          <label for="palette-input">Input Colors (Hex)</label>
          <div class="palette-input-wrap">
            <pre id="palette-highlight" aria-hidden="true"></pre>
            <textarea id="palette-input" rows="3" spellcheck="false" placeholder="eg, #E64B35, #4DBBD5, #00A087, #3C5488, ..."></textarea>
          </div>
          <div class="palette-clear-row">
            <button id="palette-clear" type="button" class="ghost palette-clear">Clear</button>
          </div>
          <div class="palette-buttons">
            <div id="palette-groups"></div>
            <button id="palette-more" type="button" class="palette-btn palette-more">More ▾</button>
          </div>
        </div>

        <div class="control-block">
          <h3>Algorithm Settings</h3>
          <div class="field">
            <label for="color-space">Optimization colorspace</label>
            <select id="color-space">
              <option value="oklab">OKLab</option>
              <option value="oklch">OKLCh</option>
              <option value="lab">Lab</option>
              <option value="lch">LCh</option>
              <option value="hsl">HSL</option>
            </select>
          </div>
          <div class="field two-col">
            <div>
              <label for="colors-to-add">Colors to add</label>
              <input id="colors-to-add" type="number" min="1" max="8" value="3">
            </div>
            <div>
              <label for="optim-runs">Restarts</label>
              <input id="optim-runs" type="number" min="5" max="200" value="100">
            </div>
          </div>
          <div class="field">
            <label for="nm-iters">Nelder–Mead iterations</label>
            <input id="nm-iters" type="number" min="50" max="1000" value="100">
          </div>
          <div class="field">
            <label>constraint widths</label>
            <div class="field three-col mini">
              <div>
                <label id="w-h-label" for="w-h">h</label>
                <input id="w-h" type="range" min="0" max="1" step="0.01" value="0">
                <span id="w-h-val" class="value-chip">0%</span>
              </div>
              <div>
                <label id="w-sc-label" for="w-sc">s/c</label>
                <input id="w-sc" type="range" min="0" max="1" step="0.01" value="0">
                <span id="w-sc-val" class="value-chip">0%</span>
              </div>
              <div>
                <label id="w-l-label" for="w-l">l</label>
                <input id="w-l" type="range" min="0" max="1" step="0.01" value="0">
                <span id="w-l-val" class="value-chip">0%</span>
              </div>
            </div>
          </div>
          <div class="field inline-row between bg-row">
            <label class="inline small">
              <input id="bg-enabled" type="checkbox" checked>
              Background Color:
            </label>
            <label for="bg-color" class="bg-chip">
              <input id="bg-color" type="color" value="#ffffff" aria-label="Background color picker">
            </label>
          </div>
          <div class="field">
            <div class="inline-row between">
              <label for="colorwheel-space">Visualization colorspace</label>
              <label class="inline small">
                <input id="sync-colorspaces" type="checkbox" checked>
                synchronize
              </label>
            </div>
            <select id="colorwheel-space">
              <option value="hsl">HSL</option>
              <option value="lch">LCh</option>
              <option value="oklch">OKLCh</option>
              <option value="lab">Lab</option>
              <option value="oklab">OKLab</option>
            </select>
          </div>
          <div class="field">
            <label for="gamut-mode">Gamut for visualization</label>
            <select id="gamut-mode">
              <option value="auto">auto (fit to palette)</option>
              <option value="full">full colorspace</option>
            </select>
            <div class="field two-col mini">
              <label class="inline small">
                <input id="clip-gamut" type="checkbox" checked>
                clip to gamut
              </label>
              <div>
                <label for="gamut-preset">Gamut preset</label>
                <select id="gamut-preset">
                  <option value="srgb">sRGB</option>
                  <option value="p3">Display P3</option>
                  <option value="ntsc">NTSC-ish</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="control-block">
          <h3>Color Vision Prioritization Weights</h3>
          <div class="field four-col tight">
            <div>
              <label for="w-none">baseline</label>
              <input id="w-none" type="number" min="0" step="0.1" value="6">
            </div>
            <div>
              <label for="w-deutan">deutan</label>
              <input id="w-deutan" type="number" min="0" step="0.1" value="6">
            </div>
            <div>
              <label for="w-protan">protan</label>
              <input id="w-protan" type="number" min="0" step="0.1" value="2">
            </div>
            <div>
              <label for="w-tritan">tritan</label>
              <input id="w-tritan" type="number" min="0" step="0.05" value="0.1">
            </div>
          </div>
        </div>
      </div>

      <div class="right-side">
        <section id="panels" class="panels"></section>
        <div class="status-col">
          <div class="control-block status">
          <h3>Status</h3>
          <div class="progress">
            <div id="progress-bar"></div>
          </div>
          <canvas id="status-graph" height="150"></canvas>
          <canvas id="status-mini" height="200"></canvas>
          <label class="inline small">
            <input id="verbose-toggle" type="checkbox">
            Verbose
          </label>
          <textarea id="verbose-box" rows="8" readonly style="display:none; resize:vertical;"></textarea>
          <p id="status-text" class="status">waiting to start…</p>
          <div id="error-text" class="error"></div>
        </div>

          <div class="control-block status">
            <h3>Results</h3>
            <div class="field">
              <label for="results-box">New hex codes</label>
              <textarea id="results-box" rows="2" readonly></textarea>
            </div>
            <div class="field inline-row compact">
              <label class="inline small">
                <input id="format-quotes" type="checkbox">
                quotes
              </label>
              <label class="inline small">
                <input id="format-commas" type="checkbox" checked>
                commas
              </label>
              <label class="inline small">
                <input id="format-lines" type="checkbox">
                newline
              </label>
            </div>
            <button id="copy-btn" class="ghost">Copy</button>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script type="module" src="main.js"></script>
</body>
</html>
