<!doctype html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1E4PVRWYSG"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1E4PVRWYSG');
    </script>

  <meta charset="utf-8">
  <title>Mult-Panel Figure GUI</title>

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css">
</head>
<body>

<div class="app">
    <header>
        <h1>multipanel <code>web-gui</code></h1>
        <button id="helpBtn" class="btn"> ? </button>
        <div id="modIndicators" class="modbar" aria-label="Modifier keys state">
            <div id="modIndMod"   class="modchip">mod</div>
            <div id="modIndPwr"   class="modchip">pwr</div>
            <div id="modIndShift" class="modchip">inv</div>
        </div>
        <span class="dim" id="dimText"></span>
    </header>

<div class="main">
    <!-- ⬇️ Sidebar belongs here, not in <header> -->
    <aside class="sidebar" aria-label="Toolbox">
    
        <fieldset class="pod" id="podVisuals">
            <legend>Visuals</legend>
            <div class="aesthetic-controls">
                <label class="stack"><span>Aspect</span>
                    <input type="number" id="aspect" step="0.1" min="0.2" max="10" placeholder="auto"></label>
                    <div class="chip-toggles" id="viewToggles">
                        <div>
                            <input type="checkbox" id="showGrid" checked>
                            <label for="showGrid">grid</label>
                        </div>
                        <div>
                            <input type="checkbox" id="squareCells">
                            <label for="squareCells">square</label>
                        </div>
                        <div>
                            <input type="checkbox" id="showIndices">
                            <label for="showIndices">indices</label>
                        </div>
                        <div>
                            <input type="checkbox" id="darkMode" checked>
                            <label for="darkMode">dark</label>
                        </div>
                    </div>
                    <div class="label-switch" id="labelSwitch">
                        <button data-mode="alpha" class="active">ABCs</button>
                        <button data-mode="num">123s</button>
                </div>
            </div>
        </fieldset>
    
        <fieldset class="pod" id="podControls">
            <legend>Controls</legend>
            <div class="functional-controls">
                <label class="stack"><span>Rows</span><input type="number" id="rows" min="1" value="8"></label>
                <label class="stack"><span>Cols</span><input type="number" id="cols" min="1" value="8"></label>
    
                <button id="undoBtn">Undo</button>
                <button id="redoBtn">Redo</button>
                <button id="clearBtn">Clear</button>
                <button id="trimBtn">Trim</button>
                <button id="fillBtn">Fill</button>
                <button id="reduceBtn">Reduce</button>
                <button id="expandBtn">Expand</button>
    
                <!-- stack these vertically -->
                <div class="control-row">
                    <button id="projectBtn">Project:</button>
                    <input id="projectTarget" type="number" value="8" min="1";">
                </div>
    
                <button id="exportBtn">Export</button>
                <button id="importBtn">Import</button>
            </div>
        </fieldset>
    
    </aside>


        <div class="canvas-wrap" id="canvasWrap">
            <canvas id="canvas"></canvas>
        </div>

        <div class="splitter" id="splitLeft"></div>

        <div class="legend">
            <h2>Legend</h2>
            <div class="legend-list" id="legendList"></div>
            <div class="dim legend-footer">Tip: you can drag and drop entries above to reorder them.</div>
        </div>

        <div class="splitter" id="splitRight"></div> <!-- ⬅︎ move inside .main -->

        <div class="coderenderer"> <!-- ⬅︎ move inside .main -->
            <div class="toolbar">
                <h2 class="hint">Code Output</h2>

                <fieldset class="include-box">
                    <legend>Include:</legend>
                    <label><input type="checkbox" id="incSetup" checked> Boilerplate</label>
                    <label><input type="checkbox" id="incURL" checked> URL</label>
                    <label><input type="checkbox" id="incExample" > Example</label>
                    <label><input type="checkbox" id="incLabels"> Labels</label>
                </fieldset>

                <div class="render-select chip-radios" id="renderRadios">
                    <!-- R --------------- -->
                    <fieldset data-lang="r">
                        <legend>R</legend>
                        <label><input type="radio" name="render" value="layout" checked>layout</span></label>
                        <label><input type="radio" name="render" value="grid"><span>grid</span></label>
                        <label><input type="radio" name="render" value="gridExtra"><span>gridExtra</span></label>
                        <label><input type="radio" name="render" value="cowplot"><span>cowplot</span></label>
                        <label><input type="radio" name="render" value="patchwork"><span>patchwork</span></label>
                        <label><input type="radio" name="render" value="parfig"><span>par(fig)</span></label>
                    </fieldset>
                    
                    <!-- Python ---------- -->
                    <fieldset data-lang="python">
                        <legend>Python</legend>
                        <label><input type="radio" name="render" value="mpl"><span>mpl</span></label>
                        <label><input type="radio" name="render" value="mpl_axes"><span>mpl (abs)</span></label>
                        <label><input type="radio" name="render" value="mpl_mosaic"><span>mpl (mosaic)</span></label>
                        <label><input type="radio" name="render" value="plotly"><span>plotly</span></label>
                        <label><input type="radio" name="render" value="bokeh"><span>bokeh</span></label>
                    </fieldset>

                    <!-- LaTeX ----------- -->
                    <fieldset data-lang="latex">
                        <legend><i>L<sub><span style="position:relative; right:.1em">A</span></sub><span
                                    style="position:relative; right:.3em"><span></style>T</b><sup>E</sup><span
                                            style="position:relative; right:.2em"></span><span
                                            style="position:relative; right:.1em">X</span></i></legend>
                        <label><input type="radio" name="render" value="textpos"><span>textpos</span></label>
                        <label><input type="radio" name="render" value="tikz"><span>TikZ</span></label>
                        <label><input type="radio" name="render" value="tabularx"><span>tabularx</span></label>
                    </fieldset>
                    
                    <!-- MATLAB / Octave ----------- -->
                    <fieldset data-lang="matlab">
                        <legend>MATLAB</legend>
                        <label><input type="radio" name="render" value="tiled"><span>tiledlayout</span></label>
                    </fieldset>
                    
                    <!-- Mathematica / Wolfram ----------- -->
                    <fieldset data-lang="wolfram">
                        <legend>Wolfram</legend>
                        <label><input type="radio" name="render" value="mma_grid"><span>grid</span></label>
                    </fieldset>

                    <!-- Julia ----------- -->
                    <fieldset data-lang="julia">
                        <legend>Julia</legend>
                        <label><input type="radio" name="render" value="makie"><span>Makie.jl</span></label>
                        <label><input type="radio" name="render" value="plots"><span>Plots.jl</span></label>
                    </fieldset>
                    
                    <!-- Other ----------- -->
                    <fieldset data-lang="other">
                        <legend>Other</legend>
                        <label><input type="radio" name="render" value="csv_inds"><span>inds</span></label>
                        <label><input type="radio" name="render" value="csv_coords"><span>coords</span></label>
                        <label><input type="radio" name="render" value="csv_dims"><span>dims</span></label>
                        <label><input type="radio" name="render" value="json"><span>json</span></label>
                        <label><input type="radio" name="render" value="yaml"><span>yaml</span></label>
                    </fieldset>
                </div>


                <button id="copyBtn" class="primary">Copy</button>
            </div>
            <textarea id="coderenderer" readonly></textarea>
        </div>
    </div>

    <footer class="dim">
        Tip: drag on empty space to draw; drag inside a rectangle to move; drag its edge to
        resize. Corners on edges/vertices are allowed; overlapping interiors are not.
        Double-click on rectangles to rename.
    </footer>
</div>

  <!-- JS -->
  <!-- <script src="./main.js" defer></script> -->
    <script type="module" src="./main.js"></script>
    <div id="helpModal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="helpTitle">
    <div id="helpBackdrop" class="modal__backdrop"></div>
    <div class="modal__card" role="document" tabindex="-1">
        <button id="helpClose" class="modal__close" aria-label="Close">×</button>
        <h2 id="helpTitle" class="modal__title">Shortcuts & Controls</h2>
        <div id="helpContent" class="modal__content"></div>
    </div>
    </div>

</body>
</html>
