<!doctype html>
<html lang="en">
<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1E4PVRWYSG"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-1E4PVRWYSG');
    </script>

  <meta charset="utf-8">
  <title>Mult-Panel Figure GUI</title>

  <!-- CSS -->
  <link rel="stylesheet" href="./style.css">
</head>
<body>

<div class="app">
    <header>
        <h1>multipanel <code>web-gui</code></h1>
        <button id="helpBtn" class="btn" data-tip="Keyboard & mouse controls and shortcuts"> ? </button>
        <div id="modIndicators" class="modbar" aria-label="Modifier keys state">
            <div id="modIndMod"   class="modchip" data-tip="The 'Mod' modifier is mapped to Cmd / Ctrl and shifts you from movement operations to resizing operations in Focus mode.">mod</div>
            <div id="modIndPwr"   class="modchip" data-tip="The 'Pwr' modifier is mapped to Alt / Option and makes rectangle operations squish or stretch other rectangles in the event of collision.">pwr</div>
            <div id="modIndShift" class="modchip" data-tip="The 'Inv' modifier is mapped to Shift and inverts the directionality of rectangle operations, eg. from expansion to contraction.">inv</div>
        </div>

        <div class="controls">

            <hr class="control-divider">

            <div class="aesthetic-controls">


                <label data-tip="The aspect ratio of the canvas below">
                    AR <input type="number" id="aspect" step="0.1" min="0.2" max="10" placeholder="auto">
                </label>

                <!-- view toggles -->
                <label data-tip="Toggle the light-grey grid lines">
                    <input type="checkbox" id="showGrid" checked> show grid
                </label>

                <label data-tip="Force each cell to be square by resizing the canvas">
                    <input type="checkbox" id="squareCells"> square cells
                </label>

                <label data-tip="Display row / column indices inside every cell">
                    <input type="checkbox" id="showIndices"> show cell indices
                </label>

                <label data-tip="Switch between light & dark colour themes">
                    <input type="checkbox" id="darkMode" checked> dark mode
                </label>

                <div class="label-switch" id="labelSwitch" 
                    data-tip="Switch between default cell-names {1, 2, 3, 4, ...} and {A, B, C, D, ...}">
                    <button data-mode="num"   class="active">123s</button>
                    <button data-mode="alpha">ABCs</button>
                </div>

                <span class="dim" id="dimText" data-tip="Current grid dimensions"></span>

            </div>

            <hr class="control-divider">

            <div class="functional-controls">

                <!-- size controls -->
                <label data-tip="Total rows in the drawing grid">
                    Rows <input type="number" id="rows" min="1" value="8">
                </label>

                <label data-tip="Total columns in the drawing grid">
                    Cols <input type="number" id="cols" min="1" value="8">
                </label>

                <!-- history -->
                <button id="undoBtn" data-tip="Undo the last change">Undo</button>
                <button id="redoBtn" data-tip="Redo the previously undone change">Redo</button>

                <!-- edit -->
                <button id="clearBtn" data-tip="Remove ALL rectangles">Clear</button>
                <button id="trimBtn" data-tip="Crop canvas to bounding-box of rectangles">Trim</button>
                <button id="fillBtn" class="btn" data-tip="Fill negative space by expanding rectangles">Fill</button>
                <button id="reduceBtn" data-tip="Factor grid without changing relative rectangle sizes and shapes">Reduce</button>
                <button id="expandBtn" data-tip="Double dimensions of grid and rectangles">Expand</button>
                <div class="control-row">
                    <button id="projectBtn" data-tip="Project canvas and rectangles to a different sized canvas">Project:</button>
                    <input id="projectTarget" data-tip="The larger dimension of the canvas to project to" type="number" value="8" min="1" style="width:3rem;">
                </div>
                

                <!-- persist -->
                <button id="exportBtn" data-tip="Save the current layout to a JSON file">Export JSON</button>
                <button id="importBtn" data-tip="Load a layout from a JSON file">Import JSON</button>
                
            </div>
        </div>
    </header>


    <div class="main">
        <div class="canvas-wrap" id="canvasWrap">
            <canvas id="canvas"></canvas>
        </div>

        <div class="splitter" id="splitLeft"></div>

        <div class="legend">
            <h2>Rectangle Plotting Order</h2>
            <div class="legend-list" id="legendList"></div>
            <div class="dim legend-footer">Tip: you can drag and drop entries above to reorder them.</div>
        </div>

        <div class="splitter" id="splitRight"></div> <!-- ⬅︎ move inside .main -->

        <div class="coderenderer"> <!-- ⬅︎ move inside .main -->
            <div class="toolbar">
                <h2 class="hint">Code Output</h2>

                <fieldset>
                    <legend>Include:</legend>
                    <label data-tip="calls to library(), plot(), import, etc.">
                        <input type="checkbox" id="incSetup" checked> Boilerplate
                    </label>

                    <label data-tip="the URL of the current configuration of rectangles as a comment">
                        <input type="checkbox" id="incURL" checked> URL
                    </label>

                    <label data-tip="example code that will render random plots given your current configuration">
                        <input type="checkbox" id="incExample" > Example
                    </label>

                    <label data-tip="code that will draw figure labels in the upper left corner of each plo9t">
                        <input type="checkbox" id="incLabels"> Labels
                    </label>

                </fieldset>

                <div class="render-select chip-radios" id="renderRadios">
                    <!-- R --------------- -->
                    <fieldset data-lang="r">
                        <legend>R</legend>
                        <label><input type="radio" name="render" value="layout" checked>layout</span></label>
                        <label><input type="radio" name="render" value="grid"><span>grid</span></label>
                        <label><input type="radio" name="render" value="gridExtra"><span>gridExtra</span></label>
                        <label><input type="radio" name="render" value="cowplot"><span>cowplot</span></label>
                        <label><input type="radio" name="render" value="patchwork"><span>patchwork</span></label>
                        <label><input type="radio" name="render" value="parfig"><span>par(fig)</span></label>
                    </fieldset>
                    
                    <!-- Python ---------- -->
                    <fieldset data-lang="python">
                        <legend>Python</legend>
                        <label><input type="radio" name="render" value="mpl"><span>mpl</span></label>
                        <label><input type="radio" name="render" value="mpl_axes"><span>mpl (abs)</span></label>
                        <label><input type="radio" name="render" value="mpl_mosaic"><span>mpl (mosaic)</span></label>
                        <label><input type="radio" name="render" value="plotly"><span>plotly</span></label>
                        <label><input type="radio" name="render" value="bokeh"><span>bokeh</span></label>
                    </fieldset>

                    <!-- LaTeX ----------- -->
                    <fieldset data-lang="latex">
                        <legend><i>L<sub><span style="position:relative; right:.1em">A</span></sub><span
                                    style="position:relative; right:.3em"><span></style>T</b><sup>E</sup><span
                                            style="position:relative; right:.2em"></span><span
                                            style="position:relative; right:.1em">X</span></i></legend>
                        <label><input type="radio" name="render" value="textpos"><span>textpos</span></label>
                        <label><input type="radio" name="render" value="tikz"><span>TikZ</span></label>
                        <label><input type="radio" name="render" value="tabularx"><span>tabularx</span></label>
                    </fieldset>
                    
                    <!-- MATLAB / Octave ----------- -->
                    <fieldset data-lang="matlab">
                        <legend>MATLAB</legend>
                        <label><input type="radio" name="render" value="tiled"><span>tiledlayout</span></label>
                    </fieldset>
                    
                    <!-- Mathematica / Wolfram ----------- -->
                    <fieldset data-lang="wolfram">
                        <legend>Wolfram</legend>
                        <label><input type="radio" name="render" value="mma_grid"><span>grid</span></label>
                    </fieldset>

                    <!-- Julia ----------- -->
                    <fieldset data-lang="julia">
                        <legend>Julia</legend>
                        <label><input type="radio" name="render" value="makie"><span>Makie.jl</span></label>
                        <label><input type="radio" name="render" value="plots"><span>Plots.jl</span></label>
                    </fieldset>
                    
                    <!-- Other ----------- -->
                    <fieldset data-lang="other">
                        <legend>Other</legend>
                        <label><input type="radio" name="render" value="csv_inds"><span>inds</span></label>
                        <label><input type="radio" name="render" value="csv_coords"><span>coords</span></label>
                        <label><input type="radio" name="render" value="csv_dims"><span>dims</span></label>
                        <label><input type="radio" name="render" value="json"><span>json</span></label>
                        <label><input type="radio" name="render" value="yaml"><span>yaml</span></label>
                    </fieldset>
                </div>


                <button id="copyBtn" class="primary">Copy</button>
            </div>
            <textarea id="coderenderer" readonly></textarea>
        </div>
    </div>

    <footer class="dim">
        Tip: drag on empty space to draw; drag inside a rectangle to move; drag its edge to
        resize. Corners on edges/vertices are allowed; overlapping interiors are not.
        Double-click on rectangles to rename.
    </footer>
</div>

  <!-- JS -->
  <!-- <script src="./main.js" defer></script> -->
    <script type="module" src="./main.js"></script>
    <div id="helpModal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="helpTitle">
    <div id="helpBackdrop" class="modal__backdrop"></div>
    <div class="modal__card" role="document" tabindex="-1">
        <button id="helpClose" class="modal__close" aria-label="Close">×</button>
        <h2 id="helpTitle" class="modal__title">Shortcuts & Controls</h2>
        <div id="helpContent" class="modal__content"></div>
    </div>
    </div>

</body>
</html>
