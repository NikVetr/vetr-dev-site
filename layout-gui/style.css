:root { --gap: 10px; --panel: 320px; --ui: 14px; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  font-size: var(--ui);
  color: #0b0b0b;
  overflow: hidden;
}

.app {
  display: grid;
  grid-template-columns: 1fr;   /* single column */
  grid-template-rows: auto 1fr auto;
  gap: var(--gap);
  padding: var(--gap);
  height: 100vh;
  box-sizing: border-box;
}

header,
footer {
  grid-column: 1 / -1;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 8px 14px;
}

header h1 {
  font-size: 16px;
  margin: 0;
  font-weight: 600;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 8px 12px;
  align-items: center;
}

label { display: inline-flex; align-items: center; gap: 6px; }

input[type='number'] { width: 70px; padding: 4px 6px; }

input[type='checkbox'] { transform: translateY(1px); }

button {
  padding: 6px 10px;
  border: 1px solid #d0d0d0;
  border-radius: 6px;
  background: white;
  cursor: pointer;
}
button:hover { background: #f6f6f6; }
button.primary { border-color: #3b82f6; }
canvas { cursor: inherit; }  /* let JS set cursor directly on the canvas */

.main {
  display: grid;
  grid-template-columns: var(--w-left, 420px)   /* canvas */
                       6px                      /* splitter */
                       var(--w-mid, 300px)      /* directory */
                       6px                      /* splitter */
                       var(--w-right, 1fr);     /* R code (flex) */
  gap: var(--gap);
  min-height: 0;          /* let children shrink vertically */
}

.splitter {
  width: 6px;
  cursor: col-resize;
  background: transparent;
}
.splitter:hover { background: #e5e7eb; }

.canvas-wrap {
  position: relative;
  background: #fff;
  border: 1px solid #e5e5e5;
  border-radius: 8px;
  overflow: hidden;
}
canvas {
  width: 100%;
  height: 100%;
  display: block;
  image-rendering: pixelated;
  cursor: crosshair;
}

.legend,
.rcode {
  border: 1px solid #e5e5e5;
  border-radius: 8px;
  background: #fff;
  overflow: auto;
}

.legend { padding: 10px; }

.legend h2,
.rcode h2 {
  font-size: 14px;
  margin: 0 0 8px 0;
  font-weight: 600;
}

.legend-list { display: flex; flex-direction: column; gap: 6px; }

/* ── legend line: swatch │ alias │ ×, always one row ──────────────── */
.legend-item{
  display:flex;                  /* switch grid → flex */
  align-items:center;
  gap:8px;
}

/* text column may shrink and wrap */
.legend-item > :nth-child(2){
  flex:1 1 0;                    /* take all free space, allow shrink */
  overflow-wrap:anywhere;        /* wrap very long aliases */
}


.legend-item:hover { background: #f7f7f7; }

.swatch {
  width: 20px;
  height: 14px;
  border-radius: 3px;
  border: 1px solid #00000015;
  display: inline-grid;
  place-items: center;
  font-size: 11px;
  color: #000;
}

.del {
  color: #c32;
  background: transparent;
  border: none;
  font-size: 16px;
  line-height: 1;
  padding: 0 6px;
  cursor: pointer;
}
.del:hover { color: #a00; }

.rcode { display: flex; flex-direction: column; }

.rcode pre,
.rcode textarea {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, 'DejaVu Sans Mono',
    monospace;
  font-size: 12px;
  line-height: 1.4;
  resize: none;
  border: none;
  border-top: 1px solid #efefef;
  margin: 0;
  padding: 10px;
  outline: none;
  flex: 1;
  white-space: pre;          /* prevents wrapping  */
  overflow: auto;            /* scroll bars both axes */
}

.rcode .toolbar { display: flex; gap: 8px; padding: 8px; }

.canvas-wrap,
.legend,
.rcode {
  overflow: auto;       /* keep scrollbars if somebody shrinks too much */
  min-width: 160px;     /* optional: don’t let them vanish entirely */
}


.dim { color: #666; }
.hint { color: #444; }
.flexsp { flex: 1; }
